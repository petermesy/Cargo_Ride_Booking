{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\cargo-booking-app\\\\frontend\\\\src\\\\pages\\\\DriverDashboard.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from 'react';\nimport socket from '../services/sock';\nimport api from '../services/api';\nimport { AuthContext } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DriverDashboard = () => {\n  _s();\n  const [status, setStatus] = useState('inactive');\n  const {\n    user\n  } = useContext(AuthContext);\n  useEffect(() => {\n    socket.on('connect', () => {\n      console.log('Socket.IO connected');\n    });\n    socket.on('connect_error', error => {\n      console.error('Socket.IO connection error:', error);\n    });\n    socket.on('driverStatusUpdate', data => {\n      if (data.driverId === (user === null || user === void 0 ? void 0 : user.id)) {\n        setStatus(data.status);\n      }\n    });\n    return () => {\n      socket.off('connect');\n      socket.off('connect_error');\n      socket.off('driverStatusUpdate');\n    };\n  }, [user]);\n  const toggleStatus = async () => {\n    const newStatus = status === 'active' ? 'inactive' : 'active';\n    try {\n      await api.put('/vehicles/status', {\n        status: newStatus\n      }, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      socket.emit('driverStatusUpdate', {\n        driverId: user === null || user === void 0 ? void 0 : user.id,\n        status: newStatus\n      });\n      setStatus(newStatus);\n    } catch (error) {\n      console.error('Error updating status:', error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mx-auto p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-2xl font-bold mb-4\",\n      children: \"Driver Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Status: \", status]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: toggleStatus,\n      className: \"bg-blue-500 text-white px-4 py-2 rounded\",\n      children: \"Toggle Status\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s(DriverDashboard, \"x5tEOw0AixFAyKM2LMpAln2XsRg=\");\n_c = DriverDashboard;\nexport default DriverDashboard;\nvar _c;\n$RefreshReg$(_c, \"DriverDashboard\");","map":{"version":3,"names":["React","useEffect","useState","useContext","socket","api","AuthContext","jsxDEV","_jsxDEV","DriverDashboard","_s","status","setStatus","user","on","console","log","error","data","driverId","id","off","toggleStatus","newStatus","put","headers","Authorization","localStorage","getItem","emit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["D:/project/cargo-booking-app/frontend/src/pages/DriverDashboard.tsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\r\nimport socket from '../services/sock';\r\nimport api from '../services/api';\r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\nconst DriverDashboard: React.FC = () => {\r\n  const [status, setStatus] = useState('inactive');\r\n  const { user } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    socket.on('connect', () => {\r\n      console.log('Socket.IO connected');\r\n    });\r\n\r\n    socket.on('connect_error', (error) => {\r\n      console.error('Socket.IO connection error:', error);\r\n    });\r\n\r\n    socket.on('driverStatusUpdate', (data) => {\r\n      if (data.driverId === user?.id) {\r\n        setStatus(data.status);\r\n      }\r\n    });\r\n\r\n    return () => {\r\n      socket.off('connect');\r\n      socket.off('connect_error');\r\n      socket.off('driverStatusUpdate');\r\n    };\r\n  }, [user]);\r\n\r\n  const toggleStatus = async () => {\r\n    const newStatus = status === 'active' ? 'inactive' : 'active';\r\n    try {\r\n      await api.put(\r\n        '/vehicles/status',\r\n        { status: newStatus },\r\n        { headers: { Authorization: `Bearer ${localStorage.getItem('token')}` } }\r\n      );\r\n      socket.emit('driverStatusUpdate', { driverId: user?.id, status: newStatus });\r\n      setStatus(newStatus);\r\n    } catch (error) {\r\n      console.error('Error updating status:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-4\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Driver Dashboard</h1>\r\n      <p>Status: {status}</p>\r\n      <button\r\n        onClick={toggleStatus}\r\n        className=\"bg-blue-500 text-white px-4 py-2 rounded\"\r\n      >\r\n        Toggle Status\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DriverDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}